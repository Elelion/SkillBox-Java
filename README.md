## SkillBox: Java

Модуль 14
Исключения, отладка, тестирование и логирование

- 14.1 Возникновение исключений
- 14.2 Отлов исключений
- 14.3 Типы исключений
- 14.4 Отладка приложений
- 14.5 Виды тестирования ПО
- 14.6 Модульное тестирование
- 14.7 Логгирование в консоли
- 14.8 Логгирование с помощью log4j2
- 14.9 Практическая работа

---

### Практическое задание:
#### Цели практической работы
+ Научиться использовать механизм исключений при помощи их создания и отлова в коде.<br>
+ Научиться писать конфигурацию для логирования событий при исполнении программы.<br>
+ Освоить написание тестов для классов, используя библиотеку JUnit.
<br><br>

#### Что входит в работу
1. Защита от некорректных данных и преждевременного завершения метода, внедрение логирования.
2. Тесты для проекта SPBMetro и исправление ошибки.

### Задание 1. Защита от некорректных данных и преждевременного завершения метода, внедрение логирования
#### Что нужно сделать:
Выполните задание в репозитории java_basics в 
проекте `ExceptionsDebuggingAndTesting/homework_1/ConsoleCustomerList`.

+ Проект ConsoleCustomerList — консольное приложение, в котором можно хранить список 
клиентов. Запустите его, введите слово help в консоль и нажмите Enter. Программа 
выведет список доступных команд и примеры их выполнения.
+ Поэкспериментируйте с программой: попробуйте ввести различные значения и команды, 
которые не будут соответствовать примерам. Добейтесь того, чтобы программа «вылетела», 
то есть произошёл Exception.
+ Напишите в классе CustomerStorage проекта ConsoleCustomerListвсе варианты защиты 
от некорректных данных, которые вам удастся придумать и обнаружить. Создайте 
собственные классы исключений, которые должны выбрасываться:
  - при некорректном количестве компонентов в переданной строке с данными;
  - при неверном формате номера телефона;
  - при неправильном формате e-mail.
  
+ Защитите программу от преждевременного завершения метода addCustomer() — напишите 
код, который будет отлавливать исключения и выводить эту информацию в консоль в 
понятном пользователю виде и в лог (см. ниже).
+ Подключите библиотеку log4j2 к проекту:
    ```
    <dependency>
    <groupId>org.apache.logging.log4j</groupId>
    <artifactId>log4j-api</artifactId>
    <version>2.18.0</version>
    </dependency>
    <dependency>
    <groupId>org.apache.logging.log4j</groupId>
    <artifactId>log4j-core</artifactId>
    <version>2.18.0</version>
    </dependency>
  
+ Пример использования:
    ```
    import org.apache.logging.log4j.*;
    
    public class Main {
    
       private static final Logger logger = 
           LogManager.getLogger(Main.class);
    
       public static void main(String[] args) {
           logger.log(Level.WARN, "Сообщение об ошибке");
       }
    }
  
+ Сделайте два отдельных лога в папке logs проекта с помощью log4j2 и настройте 
конфигурацию log4j следующим образом:
  - `logs/queries.log` — заполняется информацией обо всех запросах к приложению;
  - `logs/errors.log` — заполняется информацией обо всех ошибках (возникших исключениях со всеми деталями).
    Подробнее о том, как настраивать конфигурацию читайте в 
    [статье](https://www.notion.so/9b1faeff94634d758fb558ac6fc9d2a9).

+ Запустите в проекте тесты и убедитесь, что они выполняются успешно. Если тесты 
не выполняются и выдают информацию об ошибках, постарайтесь самостоятельно исправить их перед отправкой результатов куратору.

### Критерии оценки
+ метод реализован;
+ код метода «чистый»;
+ тесты выполняются успешно;
+ логи пишутся корректно;
+ в каждый лог-файл выводится только соответствующий тип информации.

### Материалы для изучения на русском языке
+ [«Исключения в Java. Часть 1».](https://skillbox.ru/media/base/isklyucheniya_v_java_chast_1/)
+ [«Исключения в Java. Часть 2».](https://skillbox.ru/media/base/isklyucheniya-v-java-chast-2/)
+ [«Исключения в Java: catch под лупой. Часть 3».](https://skillbox.ru/media/base/isklyucheniya-v-java-catch-pod-lupoy-chast-3/)
+ [«Правильно освобождаем ресурсы в Java. try...with resources».](https://habr.com/ru/post/183322/)
+ [«Что спрашивают на собеседованиях об исключениях».](https://javastudy.ru/interview/exceptions/)
+ [«Логирование в Java — Logger».](https://java-blog.ru/osnovy/logger-java)
+ [«Логирование с Slf4j и Logback».](https://urvanov.ru/2019/07/08/логирование-с-slf4j-и-logback/)
+ [«Пример настройки конфигурации log4j2».](https://www.notion.so/sendel/9b1faeff94634d758fb558ac6fc9d2a9)

----

### Задание 2. Тесты для проекта SPBMetro и исправление ошибки
#### Что нужно сделать
Выполните задание в репозитории java_basics 
в проекте `ExceptionsDebuggingAndTesting/homework_2.`

+ Напишите тесты на все методы класса RouteCalculator в проекте SPBMetro.
+ С помощью тестов и отладки исправьте ошибку, которую вы найдёте в проекте 
SPBMetro в классе RouteCalculator.

#### Советы и рекомендации
+ Сформируйте в тестовом классе схему метро (StationIndex), в которой можно 
построить хотя бы один маршрут с двумя пересадками. Сделайте небольшую схему, 
чтобы легче в ней ориентироваться.
+ Чтобы протестировать приватные методы класса RouteCalculator, используйте 
различные аргументы метода getShortestRoute()для вызова методов без пересадок, 
с одной и двумя пересадками.
+ **Code Coverage** — инструмент в IDEA, определяющий уровень покрытия тестами 
классов, методов и строк. Чтобы запустить тесты с проверкой покрытия, надо нажать 
правой кнопкой мыши по классу директории с тестами и 
выбрать **Run All tests with Coverage**. Желательно добиться 100%-го покрытия методов 
класса RouteCalculator.